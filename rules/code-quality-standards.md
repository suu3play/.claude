# コード品質基準

## 開発方針

-   初回実装時には必ずテストを含めること。
-   新規プロジェクト作成時に.gitignore ファイルを自動生成し、言語・フレームワークに応じた標準的な除外パターンを適用すること。
-   **新規プロジェクト作成時のみ**、アプリ概要を確認して適切な README.md を作成
-   TODO リストを作成し、各フェーズごとの開発計画とその進捗を記述すること
-   差分は最小限にとどめ、無関係な修正を含めないこと。
-   パフォーマンス、可読性、スケーラビリティを常に意識すること。
-   関数は小さく、単一責任の原則に従って構成すること
-   既存の実装パターンや設計に準拠すること。
-   変数名・関数名は意図が明確に伝わるように命名すること
-   適切なコメントを記述すること（ただし、自明な内容は避ける）

## 言語別コーディング規約

-   **Python**: 型ヒントを必須とし、最大行長は 88 文字以内
-   **C#**: 明示的型宣言を推奨し、XML ドキュメントコメントを記述
-   **TypeScript**: 厳密な型定義を行い、ESLint・Prettier の設定に従う
-   **JavaScript**: 可能な限り TypeScript の使用を推奨

### Python 固有の要件

-   **インデント検証必須**: コード修正後は必ず構文チェックを実行すること。
    ```bash
    python3 -c "import ast; ast.parse(open('filename.py').read())"
    ```
-   インデントエラーは実行時まで検出されないため、編集完了時の検証を徹底する。
-   一貫したインデント（4 スペース）を維持し、タブとスペースの混在を禁止する。

### C# 固有の要件

-   **.NET バージョン**: 最新の LTS バージョン（.NET 8 以降）を使用すること
-   **nullable 参照型**: 必ず有効にし、適切に null 安全性を確保すること
-   **依存性注入**: Microsoft.Extensions.DependencyInjection を積極的に活用すること
-   **非同期処理**: I/O 集約的な処理では必ず async/await パターンを使用すること
-   **パフォーマンス**: メモリ効率とガベージコレクションを考慮した実装を行うこと

### React×TypeScript 固有の要件

-   **プロジェクト構築**: React×TypeScript プロジェクトは指定がない限り、Vite で構築すること。
-   **型安全性**: Props・State・イベントハンドラーには必ず型定義を行うこと
-   **コンポーネント設計**: 関数コンポーネントとフックを基本とし、クラスコンポーネントは使用しない
-   **状態管理**:
    -   ローカル状態: useState・useReducer を使用
    -   グローバル状態: Context API、必要に応じて状態管理ライブラリを検討
-   **パフォーマンス最適化**:
    -   React.memo、useMemo、useCallback を適切に使用
    -   不要な再レンダリングを防ぐ
-   **ESLint設定**:
    -   eslint-plugin-react、eslint-plugin-react-hooks を導入
    -   eslint-plugin-jsx-a11y でアクセシビリティを確保
-   **コンポーネント構成**:
    -   単一責任の原則に従い、小さく再利用可能なコンポーネントを作成
    -   ロジックとUIの分離を意識
-   **テスト**:
    -   Vitest + React Testing Library を使用
    -   ユーザー操作を模したテストを記述

## セキュリティ要件

-   **入力検証**: ユーザー入力は必ず検証・サニタイズすること
-   **XSS対策**: dangerouslySetInnerHTML の使用は最小限にとどめ、使用時は必ずサニタイズ
-   **依存関係**: 定期的に依存パッケージの脆弱性をチェック（npm audit）
-   **環境変数**: 機密情報は環境変数で管理し、リポジトリにコミットしない
-   **HTTPS**: 本番環境では必ず HTTPS を使用

## アクセシビリティ要件

-   **セマンティックHTML**: 適切なHTML要素を使用（button、nav、main など）
-   **キーボード操作**: すべての機能がキーボードで操作可能であること
-   **ARIA属性**: 必要に応じて適切なARIA属性を付与
-   **コントラスト**: WCAG 2.1 AA レベル以上のコントラスト比を確保
-   **スクリーンリーダー**: 重要な情報はスクリーンリーダーで読み上げ可能にすること