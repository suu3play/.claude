# ドキュメント作成基準

## 基本方針

- **作成タイミング**: 新規プロジェクト作成時にREADME.mdと設計書を自動作成
- **更新方針**:
  - 設計書は変更のたびに自動更新
  - README等の既存ドキュメントは、ユーザーの明示的な指示がない限り更新しない
- **生成ツール名の禁止**: いかなるドキュメントにもClaudeなど生成ツール名を記載しないこと

## README.md 作成基準

### 新規プロジェクト作成時

プロジェクト作成時には、以下の情報を含むREADME.mdを自動生成すること：

1. **プロジェクト名と概要** - 目的、機能、技術スタック
2. **セットアップ手順** - 環境、インストール、環境変数
3. **使用方法** - 開発サーバー、ビルド、テスト実行
4. **プロジェクト構成**（必要に応じて）
5. **ライセンス**（必要に応じて）

### 既存プロジェクトのREADME更新

- ユーザーが明示的に「READMEを更新して」と指示した場合のみ更新
- 自動的な更新は行わない

## コード内コメント基準

### コメントを記述すべき場合

- **複雑なロジック**: アルゴリズムやビジネスロジックが複雑な場合
- **回避策（Workaround）**: 特定の問題を回避するための処理
- **パフォーマンス最適化**: 最適化のために可読性を犠牲にしている箇所
- **外部依存**: APIの仕様やライブラリの動作に依存している箇所
- **型定義**: 複雑な型定義やジェネリクスの説明

### コメントを記述すべきでない場合

- **自明な処理**: コードを読めば明らかな内容
- **変数名・関数名で説明できる内容**: 適切な命名で十分説明できる場合
- **コードの繰り返し**: コードと同じ内容をコメントで繰り返す

### コメントの記述形式

- **Python**: docstring形式（Google/NumPy/Sphinx）
- **TypeScript/JavaScript**: JSDoc形式
- **C#**: XMLドキュメントコメント

## API ドキュメント

### REST API
- OpenAPI (Swagger) 形式でのドキュメント作成を推奨
- 各エンドポイントには、URL、HTTPメソッド、パラメータ、レスポンス形式、認証要件、使用例を記載

### GraphQL API
- スキーマ定義にコメントを記述
- 複雑なクエリには使用例を提供

## 設計書（DESIGN.md）

### 作成・更新タイミング

- **新規プロジェクト作成時**: 初期設計書を自動作成
- **機能追加・変更時**: 影響範囲に応じて自動更新
- **リファクタリング時**: アーキテクチャ変更があれば更新

### 設計書の構成

設計書は `docs/DESIGN.md` に配置し、以下のテンプレートに従って作成：

- **テンプレート**: `.claude/templates/design-template.md`
- **主要なセクション**:
  - 概要（目的、主要機能、対象ユーザー）
  - アーキテクチャ（システム構成、ディレクトリ構成）
  - データモデル（エンティティ定義、型定義）
  - 機能一覧（実装済み/未実装）
  - API設計（該当する場合）
  - 状態管理
  - パフォーマンス考慮事項
  - セキュリティ考慮事項
  - テスト戦略
  - デプロイメント
  - 既知の問題・制限事項
  - 今後の改善案

### 自動更新のルール

以下の変更があった場合、設計書を自動更新する：

1. **新規機能追加時** - 「機能一覧」セクションに追加、関連する「データモデル」や「API設計」を更新
2. **アーキテクチャ変更時** - 「システム構成」や「ディレクトリ構成」を更新
3. **主要なリファクタリング時** - 「アーキテクチャ」セクション、「パフォーマンス考慮事項」を更新
4. **既知の問題・技術的負債の発見時** - 「既知の問題・制限事項」に追記
5. **セキュリティ対策の実装時** - 「セキュリティ考慮事項」を更新

### 更新時の注意点

- 変更箇所を明確にし、最終更新日を更新
- 既存情報との整合性を確認
- 過度な詳細化を避ける（コードを読めばわかる内容は省略）
- 複雑な構成は図で表現（Mermaid記法推奨）

### 更新しない場合

以下の変更では設計書を更新しない：
- 軽微なバグ修正
- UI文言の修正
- コメントの追加
- テストコードのみの変更
- コードフォーマット変更

## 変更履歴（CHANGELOG）

### 記述タイミング
- バージョン更新時に必ず更新
- Keep a Changelog 形式に従う

### 記述内容
Added、Changed、Fixed、Deprecated、Removed、Securityのセクションで構成

## プロジェクト固有ドキュメント

### アーキテクチャドキュメント
大規模プロジェクトでは以下のドキュメントを作成することを推奨：
- アーキテクチャ概要、データモデル、API設計、デプロイメント

### 意思決定記録（ADR: Architecture Decision Records）
重要な設計判断は記録として残すことを推奨：
- 状況、決定、理由、結果の4セクションで構成

## ドキュメントの配置場所

- **README.md**: プロジェクトルート
- **DESIGN.md**: `docs/DESIGN.md`（設計書）
- **CHANGELOG.md**: プロジェクトルート
- **API ドキュメント**: `docs/api/` または OpenAPI YAMLファイル
- **アーキテクチャドキュメント**: `docs/architecture/`
- **ADR**: `docs/adr/` または `docs/decisions/`
- **開発ガイド**: `docs/development/`

## 禁止事項

1. **生成ツール名の記載禁止** - README、コメント、コミットメッセージ等すべてのドキュメントに適用
2. **過度な自動更新** - ユーザーの明示的な指示なしにドキュメントを更新しない
3. **不正確な情報** - コードと矛盾する情報、未実装の機能、古い情報を記載しない
