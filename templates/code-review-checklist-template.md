# コードレビューチェックリスト

プルリクエスト: #[PR番号]
レビュアー: [名前]
レビュー日: YYYY-MM-DD

---

## 機能性

- [ ] **要件を満たしている**
  - Issue/タスクで定義された要件をすべて満たしている
  - 期待される動作が実装されている

- [ ] **エッジケースを考慮している**
  - 空配列、null、undefined の処理が適切
  - 数値の境界値（0、負数、最大値）を考慮
  - 文字列の長さ（空文字、非常に長い文字列）を考慮

- [ ] **エラーハンドリングが適切**
  - try-catch が適切に配置されている
  - エラーメッセージがユーザーフレンドリー
  - エラー時の状態管理が適切
  - ログ出力が適切（本番環境での機密情報漏洩がない）

---

## コード品質

- [ ] **命名が適切**
  - 変数名: 意図が明確、略語を避ける
  - 関数名: 動詞から始まる、何をするかが明確
  - クラス名: 名詞、責務が明確
  - 定数: UPPER_SNAKE_CASE（適切な場合）
  - boolean変数: is/has/can から始まる

- [ ] **関数が単一責任を守っている**
  - 1つの関数は1つのことのみを行う
  - 関数の長さは適切（目安: 30行以内）
  - ネストの深さは適切（目安: 3レベル以内）

- [ ] **重複コードがない**
  - DRY原則に従っている
  - 共通処理が適切に関数化されている
  - コピー&ペーストコードがない

- [ ] **マジックナンバーを避けている**
  - 数値リテラルが定数化されている
  - 定数名が意図を表している

- [ ] **適切なコメントがある**
  - 複雑なロジックに説明コメントがある
  - Why（なぜ）を説明している（What は避ける）
  - 時代遅れのコメントがない
  - TODO/FIXME が適切に管理されている

---

## TypeScript/型安全性

- [ ] **型定義が適切**
  - any を使用していない（やむを得ない場合はコメントあり）
  - unknown の使用が適切
  - 型アサーションが最小限
  - ジェネリクスが適切に使用されている

- [ ] **型推論を活用**
  - 自明な型定義を避けている
  - 必要な箇所のみ明示的な型定義

- [ ] **null安全性**
  - Optional Chaining (?.) の使用が適切
  - Nullish Coalescing (??) の使用が適切
  - 非nullアサーション (!) の使用が最小限

---

## React/フロントエンド

- [ ] **コンポーネント設計**
  - 関数コンポーネントを使用
  - Props の型定義が適切
  - 単一責任の原則に従っている
  - 再利用可能な設計

- [ ] **フックの使用が適切**
  - useEffect の依存配列が適切
  - カスタムフックの使用が適切
  - フックのルールに従っている

- [ ] **状態管理**
  - 必要最小限の状態のみ管理
  - 状態の置き場所が適切（ローカル/グローバル）
  - 派生状態を避けている

---

## パフォーマンス

- [ ] **不要な再レンダリングがない**
  - React.memo の使用が適切
  - useMemo/useCallback の使用が適切
  - key prop が適切に設定されている

- [ ] **N+1問題がない**
  - ループ内でのAPI呼び出しがない
  - データベースクエリが最適化されている

- [ ] **適切なキャッシングを使用**
  - 計算結果のキャッシュ（useMemo等）
  - API レスポンスのキャッシュ

- [ ] **非同期処理の最適化**
  - Promise.all の使用が適切
  - 不要な await がない
  - 並列実行可能な処理を直列にしていない

---

## セキュリティ

- [ ] **入力検証が適切**
  - ユーザー入力のバリデーション
  - サニタイゼーション処理
  - 型チェック

- [ ] **XSS対策**
  - dangerouslySetInnerHTML の使用が適切（必要最小限）
  - ユーザー入力のエスケープ
  - HTMLのサニタイズ

- [ ] **認証・認可**
  - 認証チェックが適切
  - 権限チェックが適切
  - トークンの取り扱いが安全

- [ ] **機密情報の取り扱い**
  - パスワード等がハードコードされていない
  - 環境変数の使用が適切
  - ログに機密情報が出力されていない

- [ ] **依存関係のセキュリティ**
  - 既知の脆弱性を持つパッケージを使用していない
  - npm audit の警告に対応している

---

## テスト

- [ ] **テストケースが追加されている**
  - 新規機能に対応するテスト
  - バグ修正に対応する回帰テスト
  - エッジケースのテスト

- [ ] **テストが成功している**
  - すべてのテストがパスしている
  - CI/CDパイプラインが成功している

- [ ] **テストの品質**
  - テストが適切な粒度
  - モックの使用が適切
  - テストコードが読みやすい
  - テストが保守しやすい

- [ ] **カバレッジが適切**
  - 重要なロジックがカバーされている
  - カバレッジが低下していない

---

## アクセシビリティ

- [ ] **セマンティックHTML**
  - 適切なHTML要素を使用（button、nav、main等）
  - div/span の乱用を避けている

- [ ] **キーボード操作**
  - すべての機能がキーボードで操作可能
  - Tab順序が適切
  - フォーカス表示が適切

- [ ] **ARIA属性**
  - 必要な箇所に適切なARIA属性
  - aria-label/aria-labelledby の使用が適切

- [ ] **視覚的配慮**
  - 色のコントラスト比が適切（WCAG 2.1 AA以上）
  - 色だけに依存した情報伝達を避けている

---

## ドキュメント・可読性

- [ ] **コメントが適切**
  - 複雑なロジックに説明がある
  - 自明な内容をコメントしていない
  - コメントが最新

- [ ] **README/設計書が更新されている**
  - 機能追加時にdocs/DESIGN.mdを更新
  - 必要に応じてREADME.mdを更新
  - APIドキュメントを更新

- [ ] **コミットメッセージが適切**
  - Conventional Commits形式
  - 変更内容が明確
  - Issue番号の記載

---

## プルリクエスト

- [ ] **PR説明が適切**
  - 変更の目的が明確
  - 変更内容のサマリー
  - テスト方法の記載
  - スクリーンショット（UI変更の場合）

- [ ] **差分が適切**
  - 無関係な変更が含まれていない
  - フォーマット変更のみのコミットが分離されている
  - 変更ファイル数が適切（目安: 10ファイル以内）
  - 変更行数が適切（目安: 500行以内）

- [ ] **マージ先が適切**
  - 正しいブランチへのマージ
  - コンフリクトが解決されている

---

## その他

- [ ] **パフォーマンスへの影響**
  - ビルドサイズが大幅に増加していない
  - バンドルサイズが適切
  - 実行速度への影響が許容範囲

- [ ] **後方互換性**
  - 既存機能が壊れていない
  - APIの破壊的変更がない（またはバージョンアップ）

- [ ] **デグレードがない**
  - 既存のテストがすべて通っている
  - 手動テストで既存機能を確認

---

## 総合評価

### 承認基準
- [ ] すべての必須項目をクリアしている
- [ ] 重大な問題がない
- [ ] 指摘事項が修正されている

### レビューコメント

[良かった点]
-

[改善点・指摘事項]
-

[その他のフィードバック]
-

---

## アクション

- [ ] 承認（Approve）
- [ ] 修正依頼（Request Changes）
- [ ] コメントのみ（Comment）

レビュー結果: [承認/修正依頼/コメント]
