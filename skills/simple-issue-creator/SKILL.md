---
name: simple-issue-creator
description: ユーザーとの対話を通じて、シンプルにGitHub Issueを作成するスキル。問題の概要や詳細を聞き取り、適切なIssueを登録する。
---

# Simple Issue Creator

ユーザーから問題の内容を聞き取り、GitHub Issueを作成するシンプルなスキルです。

## トリガー条件

以下のようなユーザーリクエストで起動:
- "Issueを作成したい"
- "バグを報告したい"
- "機能追加のIssueを作りたい"
- "問題をIssueにして"

## 実行フロー

### ステップ1: プロジェクトの確認

現在のディレクトリがGitリポジトリであることを確認:

```bash
git status
```

リポジトリでない場合、またはリモートが設定されていない場合はユーザーに通知。

### ステップ2: 標準ラベルの読み込み

Issue作成前に`.claude/labels.md`から標準ラベル定義を読み込み:

```bash
# labels.mdの存在確認
if [ -f ".claude/labels.md" ]; then
  cat .claude/labels.md
else
  echo "警告: .claude/labels.mdが見つかりません"
  echo "/copy-labelsを実行してラベルを設定することを推奨します"
fi
```

### ステップ3: Issue情報の聞き取り

ユーザーに以下の情報を対話形式で質問（標準ラベルを`.claude/labels.md`から参照）:

1. **Issueのタイトル** (必須)
   - 「Issueのタイトルを教えてください」
   - 例: "ログイン画面でエラーが発生する"

2. **Issue種別** (任意、デフォルト: バグ)
   - 「Issue種別を選択してください」
     - バグ → `Type：バグ`
     - 新機能 → `Type：新機能・既存改修`
     - ドキュメント → `Type：ドキュメント更新`
     - リファクタリング → `Type：リファクタリング`
     - 質問・相談 → `Type：質問・相談`
     - その他 → `Type：作業`

3. **優先度/緊急度** (任意、デフォルト: 中)
   - **通常のIssue**:
     - 最優先 → `Priority：最優先`
     - 高 → `Priority：中`
     - 中 → `Priority：中`
     - 低 → `Priority：低`
   - **質問・相談の場合**:
     - 高 → `緊急度：高`
     - 中 → `緊急度：中`
     - 低 → `緊急度：低`

4. **問題の詳細** (必須)
   - 「問題の詳細を教えてください（複数行可）」
   - ユーザーが説明を終えるまで聞き取り

5. **再現手順** (任意)
   - 「再現手順があれば教えてください（なければスキップ）」

6. **期待する動作** (任意)
   - 「期待する動作があれば教えてください（なければスキップ）」

7. **追加情報** (任意)
   - 「その他追加情報があれば教えてください（なければスキップ）」

### ステップ3: Issue内容のプレビュー

収集した情報を整形してユーザーに確認:

```markdown
# タイトル
{タイトル}

## 問題の詳細
{詳細}

## 再現手順
{再現手順}

## 期待する動作
{期待する動作}

## 追加情報
{追加情報}

ラベル: {Issue種別}, {優先度}
```

ユーザーに確認:
- 「この内容でIssueを作成しますか？ (yes/no)」
- 「修正が必要な場合は、修正したい項目を教えてください」

### ステップ5: GitHub Issueの作成

確認が取れたら、標準ラベルを使用して`gh issue create`コマンドでIssueを作成:

```bash
# 標準ラベルを使用したIssue作成
gh issue create \
  --title "{タイトル}" \
  --body "{Issue本文}" \
  --label "Type：バグ" \
  --label "Priority：中"

# 質問・相談の場合は緊急度ラベルを使用
gh issue create \
  --title "{タイトル}" \
  --body "{Issue本文}" \
  --label "Type：質問・相談" \
  --label "緊急度：中"
```

**ラベルが存在しない場合の対応**:
- 標準ラベルがプロジェクトに未設定の場合、`/copy-labels`実行を提案
- ラベルなしでIssueを作成するか確認

成功したらIssue URLをユーザーに通知。

## Issue本文のテンプレート

```markdown
## 問題の詳細

{詳細}

{再現手順がある場合}
## 再現手順

{再現手順}

{期待する動作がある場合}
## 期待する動作

{期待する動作}

{追加情報がある場合}
## 追加情報

{追加情報}
```

## エラーハンドリング

- Gitリポジトリでない場合: 「このディレクトリはGitリポジトリではありません」
- リモートが未設定: 「リモートリポジトリが設定されていません」
- `gh`コマンドが利用できない: 「GitHub CLIがインストールされていません」
- Issue作成失敗: エラーメッセージを表示し、原因を確認

## 注意事項

1. **簡潔な対話**: 必要最小限の情報のみ質問する
2. **任意項目のスキップ**: ユーザーが「スキップ」「なし」「-」等と答えた場合は省略
3. **柔軟な入力**: ユーザーが一度に複数の情報を提供した場合は、それを活用
4. **確認必須**: Issue作成前に必ずプレビューして確認を取る

## 使用例

### 例1: バグ報告

```
ユーザー: バグを報告したい
スキル: Issueのタイトルを教えてください
ユーザー: ログイン画面でエラーが発生する
スキル: Issue種別を選択してください（バグ/新機能/ドキュメント/リファクタリング/質問・相談/その他）
ユーザー: バグ
スキル: 優先度を選択してください（最優先/高/中/低）
ユーザー: 高
スキル: 問題の詳細を教えてください
ユーザー: ログイン画面でメールアドレスとパスワードを入力して送信すると、500エラーが返される
スキル: 再現手順があれば教えてください（なければスキップ）
ユーザー: 1. ログイン画面を開く 2. メールアドレスとパスワードを入力 3. ログインボタンをクリック
スキル: 期待する動作があれば教えてください（なければスキップ）
ユーザー: ログインに成功してダッシュボードに遷移する
スキル: その他追加情報があれば教えてください（なければスキップ）
ユーザー: なし
スキル: [プレビュー表示]
スキル: この内容でIssueを作成しますか？
ユーザー: yes
スキル: Issue #XX を作成しました: https://github.com/...
```

### 例2: 機能追加リクエスト

```
ユーザー: Issueを作成したい
スキル: Issueのタイトルを教えてください
ユーザー: CSVエクスポート機能を追加したい
スキル: Issue種別を選択してください（バグ/新機能/ドキュメント/リファクタリング/質問・相談/その他）
ユーザー: 新機能
スキル: 優先度を選択してください（最優先/高/中/低）
ユーザー: 中
スキル: 問題の詳細を教えてください
ユーザー: ユーザーリストをCSV形式でエクスポートできるようにしたい。管理画面から簡単にダウンロードできると便利。
スキル: 再現手順があれば教えてください（なければスキップ）
ユーザー: スキップ
スキル: 期待する動作があれば教えてください（なければスキップ）
ユーザー: 管理画面のユーザーリストページに「CSVエクスポート」ボタンを追加し、クリックするとCSVファイルがダウンロードされる
スキル: その他追加情報があれば教えてください（なければスキップ）
ユーザー: スキップ
スキル: [プレビュー表示]
スキル: この内容でIssueを作成しますか？
ユーザー: yes
スキル: Issue #XX を作成しました: https://github.com/...
```

## 制限事項

- GitHub CLIがインストールされている必要がある
- Gitリポジトリ内で実行する必要がある
- リモートリポジトリが設定されている必要がある
- GitHub認証が完了している必要がある

## 関連スキル

- **analysis-issue-creator**: コード分析結果からIssueを作成（より高度）
- **issue-fixer**: Issueの内容から修正計画を作成
