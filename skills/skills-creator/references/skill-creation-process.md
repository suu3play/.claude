# スキル作成プロセス詳細ガイド

このドキュメントは、SKILL.mdに記載されているスキル作成プロセスの詳細説明とベストプラクティスを提供します。

## Step 1: 具体例によるスキル理解

### 目的
スキルの使用パターンを明確に理解する。直接的なユーザー例または検証された生成例から理解を得る。

### 重要な質問例
- スキルがサポートすべき機能は何か？
- スキルがどのように使われるかの具体例は？
- ユーザーがどのような言葉でスキルを起動するか？

### 実践例: image-editorスキル
- "画像編集、回転、その他の機能は必要ですか？"
- "このスキルの使用例を教えてください"
- "「この画像から赤目を除去して」「この画像を回転させて」のような要求が想定されますが、他にありますか？"
- "どのような言葉でこのスキルを起動すべきですか？"

### ベストプラクティス
- 一度に多くの質問をしない（ユーザーを圧倒しない）
- 最も重要な質問から始める
- 必要に応じてフォローアップする
- スキルがサポートすべき機能が明確になるまで続ける

### このステップをスキップすべき場合
- スキルの使用パターンが既に明確に理解されている場合
- ただし、既存スキルの改善時にも有用

## Step 2: 再利用可能なスキル内容の計画

### 目的
具体例から効果的なスキルを作成するため、各例を分析して必要なリソースを特定する。

### 分析プロセス
各具体例について：
1. ゼロから実行する方法を考える
2. 繰り返し実行する際に役立つscripts、references、assetsを特定する

### 実践例1: pdf-editorスキル
**クエリ例**: "このPDFを回転させて"

**分析**:
1. PDFを回転させるには毎回同じコードを書き直す必要がある
2. `scripts/rotate_pdf.py`スクリプトをスキルに保存すると便利

**結論**: scriptsディレクトリに回転スクリプトを含める

### 実践例2: frontend-webapp-builderスキル
**クエリ例**: "Todoアプリを作って"、"歩数を追跡するダッシュボードを作って"

**分析**:
1. フロントエンドWebアプリを書くには毎回同じボイラープレートHTML/Reactが必要
2. ボイラープレートHTML/Reactプロジェクトファイルを含む`assets/hello-world/`テンプレートが便利

**結論**: assetsディレクトリにボイラープレートテンプレートを含める

### 実践例3: big-queryスキル
**クエリ例**: "今日何人のユーザーがログインしましたか？"

**分析**:
1. BigQueryをクエリするには毎回テーブルスキーマと関係を再発見する必要がある
2. テーブルスキーマを文書化した`references/schema.md`ファイルが便利

**結論**: referencesディレクトリにスキーマドキュメントを含める

### 成果物
各具体例を分析して、含めるべき再利用可能なリソースのリストを作成：
- scripts（実行可能コード）
- references（ドキュメント）
- assets（出力に使用するファイル）

## Step 3: スキルの初期化

### 目的
スキルを実際に作成する。

### このステップをスキップすべき場合
- 開発中のスキルが既に存在し、反復やパッケージ化が必要な場合
- その場合は次のステップに進む

### 新規スキル作成時
常に`init_skill.py`スクリプトを実行する。

**使用方法**:
```bash
scripts/init_skill.py <skill-name> --path <output-directory>
```

**スクリプトの動作**:
- 指定されたパスにスキルディレクトリを作成
- 適切なフロントマターとTODOプレースホルダーを含むSKILL.mdテンプレートを生成
- `scripts/`, `references/`, `assets/`ディレクトリを作成
- 各ディレクトリに例示ファイルを追加（カスタマイズまたは削除可能）

### 初期化後
生成されたSKILL.mdと例示ファイルを必要に応じてカスタマイズまたは削除する。

## Step 4: スキルの編集

### 基本方針
スキルは別のClaudeインスタンスが使用するために作成されていることを忘れない。

### 含めるべき情報
- Claudeにとって有益で自明でない情報
- 手続き的知識
- ドメイン固有の詳細
- 再利用可能なアセット
- タスクをより効果的に実行するのに役立つもの

### 4.1 再利用可能なスキル内容から始める

**実装の開始**:
Step 2で特定した再利用可能リソースから始める：
- `scripts/`ファイル
- `references/`ファイル
- `assets/`ファイル

**ユーザー入力が必要な場合の例**:
- `brand-guidelines`スキル実装時：
  - ユーザーがブランドアセットやテンプレートを`assets/`に提供する必要がある
  - ドキュメントを`references/`に提供する必要がある

**不要なファイルの削除**:
初期化スクリプトが作成した例示ファイルとディレクトリのうち、スキルに不要なものは削除する。

### 4.2 SKILL.mdの更新

**記述スタイル**:
- **命令形/不定詞形**を使用（動詞優先の指示）
- 二人称は使用しない
- 客観的で指示的な言語を使用
- 例: "Xを達成するには、Yを実行する"
  - NG: "Xすべきです"
  - NG: "Xする必要がある場合"

**SKILL.md完成のための質問**:
1. スキルの目的は何か？（数文で）
2. スキルはいつ使用されるべきか？
3. 実際にClaudeはどのようにスキルを使用すべきか？
   - 上記で開発したすべての再利用可能スキル内容を参照し、Claudeがそれらの使用方法を知るようにする

**重要**: 詳細なリファレンス情報はreferencesファイルに、SKILL.mdには本質的な手続き的指示とワークフローガイダンスのみを保持する。

## Step 5: スキルのパッケージング

### 目的
スキルを配布可能なzipファイルにパッケージ化する。

### パッケージングコマンド
```bash
scripts/package_skill.py <path/to/skill-folder>
```

**出力ディレクトリ指定（オプション）**:
```bash
scripts/package_skill.py <path/to/skill-folder> ./dist
```

### パッケージングスクリプトの動作

**1. 自動検証**:
以下をチェック：
- YAMLフロントマターの形式と必須フィールド
- スキルの命名規則とディレクトリ構造
- 説明の完全性と品質
- ファイル構成とリソース参照

**2. パッケージング**（検証通過時）:
- スキル名に基づいたzipファイルを作成（例: `my-skill.zip`）
- すべてのファイルを含める
- 配布用の適切なディレクトリ構造を維持

### 検証失敗時
- エラーを報告してパッケージを作成せずに終了
- 検証エラーを修正して再度実行

## Step 6: 反復

### 目的
スキルをテストして改善する。

### 反復ワークフロー
1. 実際のタスクでスキルを使用
2. 困難や非効率性に気づく
3. SKILL.mdやバンドルリソースをどのように更新すべきか特定
4. 変更を実装して再度テスト

### ベストプラクティス
- スキル使用直後に改善を要求する（使用体験が新鮮な状態で）
- 小さな改善を積み重ねる
- ユーザーフィードバックを積極的に取り入れる

## ベストプラクティス集

### Progressive Disclosure（段階的開示）の活用
1. メタデータ（name + description）: 常にコンテキスト内（約100語）
2. SKILL.md本文: スキル起動時（5k語未満）
3. バンドルリソース: Claudeが必要に応じて（無制限*）

*スクリプトはコンテキストウィンドウに読み込まずに実行可能なため無制限

### SKILL.mdを簡潔に保つ
- 本質的な手続き的指示のみをSKILL.mdに
- 詳細なリファレンス資料はreferencesファイルへ
- 例示やスキーマはreferencesファイルへ
- 重複を避ける（情報はSKILL.mdまたはreferencesのいずれかに）

### referencesファイルの効果的な使用
- 大きなファイル（10k語以上）の場合、SKILL.mdにgrep検索パターンを含める
- データベーススキーマ、APIドキュメント、ドメイン知識、企業ポリシーなどに最適
- Claudeが必要と判断したときのみ読み込まれるため、コンテキストウィンドウを節約

### scriptsの効果的な使用
- 同じコードが繰り返し書き直される場合に使用
- 決定論的な信頼性が必要な場合に使用
- トークン効率的で決定論的
- コンテキストに読み込まずに実行可能
- 環境固有の調整やパッチのために読み込む必要がある場合もある

### assetsの効果的な使用
- 最終出力で使用されるファイルに使用
- コンテキストに読み込まれることを意図していない
- テンプレート、画像、アイコン、ボイラープレートコード、フォント、サンプルドキュメントなど
- 出力リソースとドキュメントを分離
- Claudeがコンテキストに読み込まずにファイルを使用可能

## よくある失敗パターンと対策

### 失敗1: SKILL.mdが長すぎる
**問題**: すべての詳細をSKILL.mdに詰め込む
**対策**: 詳細情報をreferencesファイルに移動

### 失敗2: メタデータの説明が曖昧
**問題**: スキルがいつ使用されるべきか不明確
**対策**: 具体的なトリガーワードと使用状況を明確に記述

### 失敗3: 具体例の不足
**問題**: 抽象的な説明のみで実例がない
**対策**: Step 1で十分な具体例を収集

### 失敗4: 再利用可能リソースの未特定
**問題**: 毎回同じコードやドキュメントを再作成
**対策**: Step 2で徹底的に分析

### 失敗5: スクリプトの過度な使用
**問題**: すべてをスクリプト化しようとする
**対策**: 繰り返し書き直されるコードや決定論的な処理のみスクリプト化
