---
name: pr-creator
description: コード品質チェック（型チェック、Lint、ビルド）を実行し、すべて成功した後にコミット・プッシュ・プルリクエストを自動作成するスキル。「PRを作成して」「プルリクエスト作って」「PR出して」と依頼された時に使用。開発ワークフローに従って品質保証済みのPRを作成
---

# PR Creator - プルリクエスト自動作成スキル

コード品質チェックを実行し、成功後に自動的にコミット・プッシュ・プルリクエストを作成します。

## 使用タイミング

- 「PRを作成して」
- 「プルリクエスト作って」
- 「PR出して」
- 「変更をプッシュしてPR作成して」

## 実行フロー

### 1. 準備
- 開発ワークフローを読み込み (`.claude/rules/development-workflow.md`)
- プロジェクト情報を確認
- Git状態とブランチ情報を取得

### 2. コード品質チェック
プロジェクトタイプに応じてチェックを実行:
- 型チェック
- Lint
- ビルド
- テスト（存在する場合）

**詳細**: `references/quality-checks.md` 参照

**重要**: いずれかが失敗した場合は即座に停止しエラー報告

### 3. 品質チェック結果のログ出力
`./logs/code_check_yyyyMMddHHmm.md` に結果を記録

### 4. 変更内容の確認とコミット
```bash
# 変更確認
git status --short
git diff --stat

# コミット（Conventional Commits形式）
git add .
git commit -m "$(cat <<'EOF'
feat: ユーザープロフィール編集機能を追加 #42

- プロフィール編集フォームを実装
- バリデーション処理を追加
EOF
)"
```

### 5. リモートへプッシュ
```bash
git push -u origin $(git branch --show-current)
```

### 6. プルリクエストの作成
```bash
gh pr create \
  --title "feat: ユーザープロフィール編集機能を追加 #42" \
  --body "$(cat pr_body.md)" \
  --base main
```

PRテンプレートに従ってボディを構成:
- 概要
- 変更内容
- テスト結果
- 影響範囲

### 7. 結果報告
```
✅ プルリクエスト作成完了

📋 詳細:
- プロジェクト: growth-diary
- ブランチ: feature/issue-42
- PR番号: #15
- PR URL: https://github.com/user/repo/pull/15

📊 品質チェック結果:
- ✅ 型チェック: 成功
- ✅ Lint: 成功
- ✅ ビルド: 成功
- ✅ テスト: 45/45件合格
```

## 使用例

### 例1: シンプルなPR作成
**ユーザー**: growth-diary の PR作成して

**動作**:
1. growth-diaryディレクトリに移動
2. 品質チェック実行 → すべて成功
3. コミット → プッシュ → PR作成
4. PR URLを報告

### 例2: カレントディレクトリで実行
**ユーザー**: PRを作成して

**動作**: カレントディレクトリから自動判定して実行

## エラーハンドリング

品質チェック失敗、Git操作エラー、PR作成エラーなど詳細は `references/error-handling.md` 参照

## 注意事項

1. **品質チェックは必須** - すべて成功するまでPR作成しない
2. **開発ワークフロー遵守** - プロジェクトのルールに従う
3. **自動化の範囲** - コミット・プッシュ・PR作成まで（レビューとマージは手動）
4. **ログの保存** - 品質チェック結果は `./logs/` に保存
5. **Issue連携** - Issue番号が含まれる場合は自動リンク

## 関連スキル

- `issue-fixer` - Issue対応スキル
- `branch-cleaner` - ブランチクリーンアップスキル
